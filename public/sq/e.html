<!DOCTYPE html>
<html>
	<head>
		<title>aaaa</title>
		<meta charset="utf-8" />
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="/sq/jquery-ui-1.10.4.custom.min.js"></script>
		<link rel="stylesheet" type="text/css" href="/sq/index.css">
	</head>
	<body>
		<div id="options">
			<div class="colors">
				<div class="color" style="background-color:#000"></div>
				<div class="color" style="background-color:#111"></div>
				<div class="color" style="background-color:#222"></div>
				<div class="color" style="background-color:#333"></div>
				<div class="color" style="background-color:#444"></div>
				<div class="color" style="background-color:#555"></div>
				<div class="color" style="background-color:#666"></div>
				<div class="color" style="background-color:#777"></div>
				<div class="color" style="background-color:#888"></div>
				<div class="color" style="background-color:#999"></div>
				<div class="color" style="background-color:#AAA"></div>
				<div class="color" style="background-color:#BBB"></div>
				<div class="color" style="background-color:#CCC"></div>
				<div class="color" style="background-color:#DDD"></div>
				<div class="color" style="background-color:#EEE"></div>
				<div class="color" style="background-color:#FFF"></div>
				<div class="color" style="background-color:#371A48"></div>
				<div class="color" style="background-color:#532B71"></div>
				<div class="color" style="background-color:#C3A3E6"></div>
				<div class="color" style="background-color:#CBBDCA"></div>
				<div class="color" style="background-color:#D57CAC"></div>
				<div class="color" style="background-color:#FF3577"></div>
				<div class="color" style="background-color:#FEA597"></div>
				<div class="color" style="background-color:#AD0747"></div>
				<div class="color" style="background-color:#810253"></div>
				<div class="color" style="background-color:#B0CC92"></div>
				<div class="color" style="background-color:#D3D5C0"></div>
				<div class="color" style="background-color:#C8EE87"></div>
				<div class="color" style="background-color:#EEF207"></div>
				<div class="color" style="background-color:#FFF07F"></div>
				<div class="color" style="background-color:#FEAE01"></div>
				<div class="color" style="background-color:#F13F01"></div>
				<div class="color" style="background-color:#D20607"></div>
				<div class="color" style="background-color:#C6D8DC"></div>
				<div class="color" style="background-color:#A9B2B7"></div>
				<div class="color" style="background-color:#D5BDA5"></div>
				<div class="color" style="background-color:#8E9A76"></div>
				<div class="color" style="background-color:#4F5A3A"></div>
				<div class="color" style="background-color:#7F5E3D"></div>
				<div class="color" style="background-color:#F16A56"></div>
				<div class="color" style="background-color:#1F1F41"></div>
				<div class="color" style="background-color:#2C3E56"></div>
				<div class="color" style="background-color:#61667C"></div>
				<div class="color" style="background-color:#7099AF"></div>
				<div class="color" style="background-color:#5D3DC4"></div>
				<div class="color" style="background-color:#0084C2"></div>
				<div class="color" style="background-color:#0EC8BB"></div>
				<div class="color" style="background-color:#009A66"></div>
				<div class="color" style="background-color:#375659"></div>
			</div>
		</div>
		<script>
			$body = $("body");
			$container = $('<div id="container" class="container"></div>');
			$sq = $("<span></span>");
			w = $(window).width();
			h = $(window).height();
			// a = w / h;
			n = 12;
			// xpx = w / n;
			x = w / n * 100 / w;
			y = h / n * 100 / h / 2;
			// ypx = w / n / a;
			// y = (ypx / h) * 100;
			// y_count = h / ypx;
			total = n * n * 3;
			// hex = getRandomColor();
			hex = "#000";
			for (i = 1; i <= total; i++) {
				$sqx = $sq.clone();
				$sqx.css({
					"width": x + "%",
					"height": y + "%",
					"background-color": "#FFF"
				});
				// .text(hex);
				// if (i > total - n) {
				// 	$sqx.css("height", y + 5 + "%");
				// }
				$container.append($sqx);
			}
			$body.append($container);

			$("span").on("click", function(){
				$el = $(this);
				if(!$el.hasClass("ui-draggable-dragging")) {
					// $(this).css("background-color", getRandomColor());
					$(this).css("background-color", hex);
					var file = "/sq/2.mp3";
					var snd = new Audio(file);
					snd.play();
				}
			})

			function getRandomColor() {
				var letters = '0123456789ABCDEF'.split('');
				var color = '#';
				for (var i = 0; i < 6; i++ ) {
					color += letters[Math.round(Math.random() * 15)];
				}
				return color;
			}

			$(function() {

				$("span").draggable({
					// revert: true,
					containment: "#container",
					scroll: false,
					snap: true,
					stack: "#container span",
					helper: "clone"
				});

				$("span").droppable({
					drop: function(event, ui) {
						$el = $(this);
						drop_color = $(this).css("background-color");
						drag_color = ui.draggable.css("background-color");
						$el.css("background-color", drag_color);
						// ui.draggable.css("background-color", drop_color);
						var file = "/sq/1.mp3";
						var snd = new Audio(file);
						snd.play();
					},
					over: function( event, ui ) {
						$el = $(this);
						drag_color = ui.draggable.css("background-color");
						$el.css("background-color", drag_color);
					}
				});

				$body.on("keypress", function(e){
					if (e.which == 99) {
						$("#options").toggle();
					}
				});

				$body.on("click", ".color", function(e){
					hex = $(this).css("background-color");
					$("#options").hide();
				})
			});
		</script>
	</body>
</html>